{% extends "base.html" %}

{% block title %}Case Details: CRMify{% endblock %}

{% block content %}
<div class="container mt-5">

    <h1>Case Details</h1>
    <div>
        <p><strong>Case ID:</strong> {{ case.id }}</p>
        <p><strong>Category:</strong> {{ case.category }}</p>
        <p><strong>Account ID:</strong> {{ case.account.id }}</p>
        <p><strong>Account Name:</strong> {{ case.account.first_name }} {{case.account.last_name }}</p>
        <p><strong>Status:</strong> {{ case.status }}</p>
        <p><strong>Created At:</strong> {{ case.created_at }}</p>
        <p><strong>Created By:</strong> {{ case.user.username }} {{case.user.email }}</p>
    </div>

    <hr>
    <h1>Case Updates</h1>
    <!-- Show updates for cases  -->
    {% for update in updates %}
    <div class="accordion" id="accordionExample">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                Update Created By {{ update.update_created_by.username }} on {{update.created_at}}
              </button>
            </h2>
          </div>
      
          <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
            <div class="card-body">
              {{update.update_text}}
            </div>
          </div>
        </div>
    </div>
    <hr>
    {% endfor %}

    <!-- Create Update Button at the Bottom -->
    <a class="btn btn-primary float-right mt-3" href="#">Create Update</a>
</div>
{% endblock %}